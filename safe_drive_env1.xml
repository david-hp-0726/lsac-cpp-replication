<mujoco model="safe_drive_env">
    <compiler angle="degree" coordinate="local" autolimits="true"/>
    <option timestep="0.01" gravity="0 0 -9.8"/>
    <default>
        <joint damping=".03"/>
        <default class="wheel">
            <geom type="cylinder" size=".06 .02" rgba=".5 .5 1 1" friction="2 0.05 0.05"/>
        </default>
        <default class="decor">
            <site type="box" rgba=".5 1 .5 1"/>
        </default>
        <default class="box_obstacle">
            <geom type="box" size="0.2 0.2 0.1"
              contype="1" conaffinity="1"
              rgba="1 1 1 1"
              solref="0.02 1" solimp="0.9 0.95 0.001"/>
        </default>
    </default>
    <worldbody>
        <!-- Ground -->
        <geom name="floor" type="plane" size="7.5 4 0.1" rgba="0.4 0.8 0.4 1"/>
        <!-- Boundary walls -->
        <geom name="wall_left" type="box" size="0.1 4 0.2" pos="-7.5 0 0.2" rgba="0.6 0.6 0.6 1"/>
        <geom name="wall_right" type="box" size="0.1 4 0.2" pos="7.5 0 0.2" rgba="0.6 0.6 0.6 1"/>
        <geom name="wall_bottom" type="box" size="7.5 0.1 0.2" pos="0 -4 0.2" rgba="0.6 0.6 0.6 1"/>
        <geom name="wall_top" type="box" size="7.5 0.1 0.2" pos="0 4 0.2" rgba="0.6 0.6 0.6 1"/>
        <!-- 4-wheel robot -->
        <body name="robot" pos="-5 0 0">
            <freejoint/>
            <!-- Chassis -->
            <body name="chassis_body" pos="0 0 0">
                <geom name="chassis" pos="0 0 0.14" type="box" size="0.2 0.15 0.02" rgba="0 0.5 1 1"/>
                <!-- Front left wheel -->
                <body name="front_left_wheel" pos="0.15 -0.12 0.06" zaxis="0 1 0">
                    <joint name="left" type="hinge" axis="0 0 1"/>
                    <geom class="wheel"/>
                </body>
                <!-- Front right wheel -->
                <body name="front_right_wheel" pos="0.15 0.12 0.06" zaxis="0 1 0">
                    <joint name="right" type="hinge" axis="0 0 1"/>
                    <geom class="wheel"/>
                </body>
                <!-- Rear left wheel (passive but still hinge for rolling) -->
                <body name="rear_left_wheel" pos="-0.15 -0.12 0.06" zaxis="0 1 0">
                    <joint name="rear_left" type="hinge" axis="0 0 1" limited="false"/>
                    <geom class="wheel"/>
                </body>
                <!-- Rear right wheel (passive but still hinge for rolling) -->
                <body name="rear_right_wheel" pos="-0.15 0.12 0.06" zaxis="0 1 0">
                    <joint name="rear_right" type="hinge" axis="0 0 1" limited="false"/>
                    <geom class="wheel"/>
                </body>
            </body>
        </body>
        <!-- Target -->
        <body name="target" pos="5 0 0.05">
            <geom type="sphere" size="0.15" rgba="1 0 0 1"/>
        </body>
        <!-- Static Bricks -->
        <geom name="brick1" type="box" size="0.3 0.15 0.1" pos="-2 2 0.1" rgba="0.8 0.2 0.2 1"/>
        <geom name="brick2" type="box" size="0.3 0.15 0.1" pos="-1 -2 0.1" rgba="0.8 0.2 0.2 1"/>
        <geom name="brick3" type="box" size="0.3 0.15 0.1" pos="0 0 0.1" rgba="0.8 0.2 0.2 1"/>
        <!-- Placeholder boxes -->
        <body name="rand_box1" pos="2 1 0.1">
            <freejoint/>
            <geom name="rand_box1_geom" class="box_obstacle"/>
        </body>
        <body name="rand_box2" pos="3 -2 0.1">
            <freejoint/>
            <geom name="rand_box2_geom" class="box_obstacle"/>
        </body>
        <body name="rand_box3" pos="-1 3 0.1">
            <freejoint/>
            <geom name="rand_box3_geom" class="box_obstacle"/>
        </body>
    </worldbody>
    <!-- Tendon for differential drive -->
    <tendon>
        <fixed name="forward">
            <joint joint="left" coef="1"/>
            <joint joint="right" coef="1"/>
            <!-- <joint joint="rear_left" coef="0.5"/>
            <joint joint="rear_right" coef="0.5"/> -->
        </fixed>
        <fixed name="turn">
            <joint joint="left"       coef="-1"/>
            <joint joint="right"      coef="1"/>
            <!-- <joint joint="rear_left"  coef="-0.5"/>
            <joint joint="rear_right" coef="0.5"/> -->
        </fixed>
    </tendon>
    <!-- Actuators -->
    <actuator>
        <motor name="forward" tendon="forward" ctrlrange="-1 1"/>
        <motor name="turn" tendon="turn" ctrlrange="-1 1"/>
    </actuator>
</mujoco>